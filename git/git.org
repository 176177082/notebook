#+TITLE:      Git 笔记

* 目录                                                    :TOC_4_gh:noexport:
- [[#git-clone][git clone]]
- [[#git-clean][git clean]]
- [[#github-fork][github fork]]
- [[#git-branch][git branch]]
- [[#git-push][git push]]
- [[#git-submodule][git submodule]]
- [[#一些问题][一些问题]]
  - [[#大小写敏感设置][大小写敏感设置]]
  - [[#diff-参数顺序][diff 参数顺序]]
  - [[#空提交][空提交]]
  - [[#创建空白分支][创建空白分支]]
  - [[#扩展][扩展]]

* git clone
  使用 ~git clone -b branch~ 克隆指定分支。

  通过 ~git clone -b tag~ 指定要克隆的 ~tag~.

* git clean
  #+BEGIN_SRC bash
    # 获取要删除的文件列表但不会删除
    git clean -n

    # 删除当前目录下所有没有 track 过的文件. 但不会删除 .gitignore 文件里面指定的文件夹和文件
    git clean -f

    # 删除指定路径下的没有被 track 过的文件
    git clean -f <path>

    # 删除当前目录下没有被 track 过的文件和文件夹
    git clean -df

    # 删除当前目录下所有没有 track 过的文件. 不管他是否是 .gitignore 文件里面指定的文件夹和文件
    git clean -xf
  #+END_SRC

* github fork
  添加上游仓库源： ~git remote add upstream source~.

  同步上游仓库：
  #+BEGIN_SRC bash
    # 获取上游更新
    git fetch upstream

    # 合并到本地分支
    git merge upstream/<branch>
  #+END_SRC

* git branch
  #+BEGIN_SRC bash
    # 查看远程分支
    git branch -r

    # 查看所有分支
    git branch -a

    # 重命名分支
    git branch -m <oldname> <newname>
  #+END_SRC
  通过命令 ~git branch -r~ 可以查看远程分支， 通过命令 ~git branch -a~ 查看所有分支。

* git push
  #+BEGIN_SRC bash
    git push --all  # push 所有分支
    git push --tags  # push tag
  #+END_SRC

* git submodule
  添加子模块: ~git submodule add~

  子模块的添加会产生一个特殊文件： ~.gitmodules~.

  + [[https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97][Git 工具 - 子模块]]

* 一些问题
** 大小写敏感设置
   #+BEGIN_SRC bash
     git config core.ignorecase false  # 设置大小写敏感

     # 修改文件名为小写

     git rm -r --cached .  # 从版本库删除大写文件
     git push
   #+END_SRC

** diff 参数顺序
   #+BEGIN_SRC bash
     # 列出 b 相较于 a 做出的修改
     git diff a b
   #+END_SRC

** 空提交
   #+BEGIN_SRC bash
     $ git commit --allow-empty -m "Empty"
   #+END_SRC

** 创建空白分支
   1. 创建无提交历史的分支
      #+BEGIN_EXAMPLE
        $ git checkout --orphan <branch>
      #+END_EXAMPLE

   2. 删除工作目录中的内容
      #+BEGIN_EXAMPLE
        $ git rm -rf .
      #+END_EXAMPLE

   3. 创建提交
      #+BEGIN_EXAMPLE
        $ git commit -am "comment"
      #+END_EXAMPLE

** 扩展
  1. 可执行文件命名为 git-<name>
  2. 通过 git <name> 的方式调用

