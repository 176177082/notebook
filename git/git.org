#+TITLE:      Git 笔记

* 目录                                                    :TOC_4_gh:noexport:
- [[#github-fork-的更新][github fork 的更新]]
  - [[#给-fork-配置一个-remote][给 fork 配置一个 remote]]
  - [[#同步-fork][同步 fork]]
- [[#克隆非-master-分支][克隆非 master 分支]]
- [[#大小写敏感][大小写敏感]]
- [[#本地分支提交][本地分支提交]]
- [[#远程操作][远程操作]]
- [[#diff][diff]]
- [[#空提交][空提交]]
- [[#分支重命名][分支重命名]]
- [[#使用子模块][使用子模块]]
- [[#提交到所有远程仓库][提交到所有远程仓库]]
- [[#libgit2-的使用][libgit2 的使用]]
- [[#创建空白分支][创建空白分支]]
- [[#git-clean][git clean]]

* github fork 的更新
** 给 fork 配置一个 remote
   ~git remote add upstream sourse~

   remote 查看:
   ~git remote -v~

** 同步 fork
   + 从上游仓库 fetch 分支和提交点, 传送到本地, 
     并会被存储在一个本地分支 upstream/master
     ~git fetch upstream~

   + 切换到本地主分支:
     ~git co master~

   + 把 upstream/master 分支合并到本地 master 上
     ~git merge upstream/master~

* 克隆非 master 分支
  + 查看远程分支:
    ~git branch -r #查看远程分支~

    或

    ~git branch -a #查看所有分支~

  + 克隆分支:
    ~git checkout -b branch~
    
* 大小写敏感
  #+BEGIN_EXAMPLE
  git config core.ignorecase false  # 设置大小写敏感
  # 修改文件名为小写
  git rm -r --cached .  # 从版本库删除大写文件
  git push ...
  #+END_EXAMPLE

* 本地分支提交
  1. git fetch origin
  2. git push

* 远程操作
  + [[http://www.ruanyifeng.com/blog/2014/06/git_remote.html][阮一峰博客]]

* diff
  ~git diff 低版本 高版本~, 高版本相对低版本做出的修改

* 空提交
  #+BEGIN_SRC bash
    $ git commit --allow-empty -m "Empty"
  #+END_SRC

* 分支重命名
  #+BEGIN_SRC bash
    $ git branch -m <oldname> <newname>
  #+END_SRC
* 使用子模块
  添加子模块: ~git submodule add~

  子模块的添加会产生一个特殊文件： ~.gitmodules~.

  + [[https://git-scm.com/book/zh/v2/Git-%E5%B7%A5%E5%85%B7-%E5%AD%90%E6%A8%A1%E5%9D%97][Git 工具 - 子模块]]
* 提交到所有远程仓库
  + git push --all
  + git push all --all

* libgit2 的使用
  + [[http://ftxtool.org/2016/03/25/113/][git status]]
  + [[https://github.com/avetisk/zsh-git-prompt/blob/master/zsh-git-prompt][zsh-git-prompt]]
  + [[https://github.com/libgit2/libgit2/blob/master/include/git2/status.h][status.h]]
* 创建空白分支
  1. 创建无提交历史的分支
     #+BEGIN_EXAMPLE
       $ git checkout --orphan <branch>
     #+END_EXAMPLE
  2. 删除工作目录中的内容
     #+BEGIN_EXAMPLE
       $ git rm -rf .
     #+END_EXAMPLE
  3. 创建提交
     #+BEGIN_EXAMPLE
       $ git commit -am "comment"
     #+END_EXAMPLE
* git clean
  #+BEGIN_SRC bash
    # 获取要删除的文件列表但不会删除
    git clean -n

    # 删除当前目录下所有没有 track 过的文件. 但不会删除 .gitignore 文件里面指定的文件夹和文件
    git clean -f

    # 删除指定路径下的没有被 track 过的文件
    git clean -f <path>

    # 删除当前目录下没有被 track 过的文件和文件夹
    git clean -df

    # 删除当前目录下所有没有 track 过的文件. 不管他是否是 .gitignore 文件里面指定的文件夹和文件
    git clean -xf
  #+END_SRC

