* 插入后返回主键 ID
  + [[https://chenzhou123520.iteye.com/blog/1849881][MyBatis+MySQL 返回插入的主键ID - 青葱岁月 - ITeye博客]]
  + [[https://www.cnblogs.com/nuccch/p/9069644.html][深入浅出mybatis之useGeneratedKeys参数用法 - 2Simple - 博客园]]

  #+begin_src sql
    UPDATE `organization`
       SET organization_name = #{organizationName},
           organization_account = #{organizationAccount},
           organization_password = #{organizationPassword},
           edit_date = CURRENT_TIMESTAMP(3)
     WHERE organization_code = #{organizationCode}
  #+end_src

* 使用中的问题
  + 通过 ~include~ 的方式包含 SQL 语句时，应该注意逗号，否则可能出现 ~A B~ 的情况，是的 A 易名为 B.
  + 批量插入更新语句 INSERT ON DUPLICATE 不能正确的返回自增 ID
  + 批量插入的自增 ID 返回好像是在 3.1 以后支持的

* 相关链接
  + [[https://www.cnblogs.com/EasonJim/p/7066717.html][MyBatis3-传递多个参数（Multiple Parameters） - EasonJim - 博客园]]
  + [[https://www.cnblogs.com/nuccch/p/9069644.html][深入浅出mybatis之useGeneratedKeys参数用法 - 2Simple - 博客园]]
  + [[https://www.cnblogs.com/qiankun-site/p/5758924.html][mybatis动态sql中的trim标签的使用 - 既然琴瑟起 - 博客园]]
  + [[http://www.mybatis.org/mybatis-3/zh/dynamic-sql.html][mybatis – MyBatis 3 | 动态 SQL]]

* 嵌套对象
  #+begin_src xml
    <?xml version="1.0" encoding="UTF-8"?>
    <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="cn.yzw.superbox.swms.business.dal.mappers.mysql.ShelvesMapper">

      <resultMap id="SHELVES_UNIT_RESULT_MAP"
                 type="cn.yzw.superbox.swms.business.model.shelves.ShelvesUnitModel">
        <result column="id" property="id"/>
        <result column="superBoxId" property="superBoxId"/>
        <result column="shelvesCode" property="shelvesCode"/>
        <result column="code" property="code"/>
        <result column="priceTag" property="priceTag"/>
        <result column="supplierSkuId" property="supplierSkuId"/>
        <result column="warningCount" property="warningCount"/>
        <result column="maxStoreCount" property="maxStoreCount"/>
        <association property="supplierSkuInfo" resultMap="SHELVES_SUPPLIER_SKU_RESULT_MAP"/>
      </resultMap>

      <resultMap id="SHELVES_SUPPLIER_SKU_RESULT_MAP"
                 type="cn.yzw.superbox.swms.business.model.shelves.ShelvesSupplierSkuModel">
        <!-- <result column="supplierName" property="supplierName"/>-->
        <result column="supplierSkuId" property="id"/>
        <result column="supplierSkuName" property="name"/>
        <result column="supplierSkuCode" property="code"/>
        <result column="supplierSkuBarCode" property="barCode"/>
        <result column="supplierSkuModel" property="model"/>
        <result column="unitName" property="unitName"/>
      </resultMap>

      <select id="searchShelvesUnitPage"
              parameterType="cn.yzw.superbox.swms.business.model.shelves.ShelvesUnitSearchModel"
              resultMap="SHELVES_UNIT_RESULT_MAP">
        SELECT
        unit.id AS id,
        unit.box_id AS superBoxId,
        unit.shelves_code AS shelvesCode,
        unit.code AS code,
        unit.price_tag AS priceTag,
        unit.supplier_sku_id AS supplierSkuId,
        unit.warning_count AS warningCount,
        unit.max_store_count AS maxStoreCount,
        unit.edit_date AS editDate,
        supplierSku.name AS supplierSkuName,
        supplierSku.code AS supplierSkuCode,
        supplierSku.bar_code AS supplierSkuBarCode,
        platformSupplierSku.model AS supplierSkuModel,
        skuUnit.name AS unitName
        FROM box_shelves_unit AS unit
        LEFT JOIN box_supplier_sku AS supplierSku ON unit.supplier_sku_id = supplierSku.id
        LEFT JOIN box_platform_supplier_sku AS platformSupplierSku ON supplierSku.id = platformSupplierSku.supplier_sku_id
        LEFT JOIN box_unit AS skuUnit ON supplierSku.unit_id = skuUnit.id
        <include refid="shelvesUnitSearchCondition"/>
        ORDER BY unit.id
        LIMIT #{pageStart}, #{pageSize}
      </select>
    </mapper>
  #+end_src
* MySQL
  + [[https://stackoverflow.com/questions/548541/insert-ignore-vs-insert-on-duplicate-key-update][mysql - "INSERT IGNORE" vs "INSERT ... ON DUPLICATE KEY UPDATE" - Stack Overflow]]
  + [[https://stackoverflow.com/questions/778534/mysql-on-duplicate-key-last-insert-id][MySQL ON DUPLICATE KEY - last insert id? - Stack Overflow]]
  + [[https://hunfan.top/2019/01/04/Mybatis%E6%89%B9%E9%87%8Finsert%E8%BF%94%E5%9B%9E%E8%87%AA%E5%A2%9E%E4%B8%BB%E9%94%AE%E9%97%AE%E9%A2%98/][Mybatis批量insert返回自增主键问题 | 混饭's Notes]]
  + [[https://my.oschina.net/zudajun/blog/674946][Mybatis3.3.x技术内幕（十五）：Mybatis之foreach批量insert，返回主键id列表（修复Mybatis返回null的bug） - 祖大俊的个人页面 - OSCHINA]]
  + [[https://blog.csdn.net/qq_27680317/article/details/81118070#%EF%BC%881%EF%BC%89%E5%8D%95%E7%BA%AF%E7%9A%84insert%E5%92%8Cinsert%20on%20duplicate%20key%20update][避坑必看：很详尽的MyBatis返回自增主键实验（包括插入或更新SQL语句insert on duplicate key update的自增主键返回情况） - 花郎徒结的博客 - CSDN博客]]
  + [[https://xiaoyue26.github.io/2015/10/19/mybatis%E6%89%B9%E9%87%8F%E6%8F%92%E5%85%A5%E5%92%8C%E6%9B%B4%E6%96%B0/][mybatis批量插入和更新 | 笔记本]]

* 缓存
  + [[https://tech.meituan.com/2018/01/19/mybatis-cache.html][聊聊MyBatis缓存机制 - 美团技术团队]]

* 动态 SQL
  + [[https://www.jianshu.com/p/bbeff97d41eb][mybatis中${}、 #{}区别及应用场景 - 简书]]

* json
  + [[https://www.cnblogs.com/rollenholt/p/3365866.html][Mybatis的ResultMap的使用 - Rollen Holt - 博客园]]
  + [[https://www.cnblogs.com/muscleape/p/10064031.html][MySQL JSON 类型数据操作 - Muscleape - 博客园]]

* generater
  + [[https://mapperhelper.github.io/docs/3.usembg/][3. MyBatis Generator 插件]]


