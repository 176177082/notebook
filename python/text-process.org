#+TITLE:      Python 文本处理

* 目录                                                    :TOC_4_gh:noexport:
- [[#yaml][YAML]]
- [[#csv][CSV]]
- [[#json][Json]]
- [[#xml][XML]]

* YAML
  + [[http://pyyaml.org/wiki/PyYAMLDocumentation][PyYAML Document]]
    
  固定顺序读写 ~yaml~:
  #+BEGIN_SRC python
    import yaml
    import functools

    from yaml import Loader, Dumper
    from collections import OrderedDict


    def _get_oredered_loader(Loader):
        """ Get OrderedLoader."""
        class _OrderedLoader(Loader):
            pass

        def _construct_mapping(loader, node):
            loader.flatten_mapping(node)
            return OrderedDict(loader.construct_pairs(node))

        _OrderedLoader.add_constructor(
            yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
            _construct_mapping)

        return _OrderedLoader


    def _get_oredered_dumper(Dumper):
        """ Get OrderedDumper."""
        class _OrderedDumper(Dumper):
            pass

        def _representer_mapping(dumper, data):
            return dumper.represent_mapping(
                yaml.resolver.BaseResolver.DEFAULT_MAPPING_TAG,
                data.items())

        _OrderedDumper.add_representer(OrderedDict, _representer_mapping)

        return _OrderedDumper


    OrderedLoader = _get_oredered_loader(Loader)
    OrderedDumper = _get_oredered_dumper(Dumper)

    load = functools.partial(yaml.load, Loader=OrderedLoader)
    load_all = functools.partial(yaml.load_all, Loader=OrderedLoader)

    dump = functools.partial(yaml.dump, Dumper=OrderedDumper)
    dump_all = functools.partial(yaml.dump_all, Dumper=OrderedDumper)


    if __name__ == '__main__':
        pass
  #+END_SRC

* CSV
  ~CSV~ 格式确实比较简单：
  + [[http://python3-cookbook.readthedocs.io/zh_CN/latest/c06/p01_read_write_csv_data.html][教程]]

* Json
  毕竟是标准库， 操作起来很是方便：
  + [[http://python3-cookbook.readthedocs.io/zh_CN/latest/c06/p02_read-write_json_data.html][教程]]

  *PS:* ~Json~ 只理解 ~Unicode~ 字符串， 所以读取到的字符串转化为 ~Python~ 对象的时候是 ~Unicode~.

* XML
  ~XML~ 的第三方库还是不错滴：
  + [[http://lxml.de/][lxml]] -- XML and HTML with Python
    
  标准库：
  + [[https://docs.python.org/2/library/markup.html][Python2.7]]
  + [[https://docs.python.org/3.6/library/markup.html][Python3.6]]
 
