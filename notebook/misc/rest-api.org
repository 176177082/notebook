#+TITLE:      Misc - REST API

* 目录                                                    :TOC_4_gh:noexport:
- [[#教程--例子][教程 & 例子]]
- [[#一般规则][一般规则]]
- [[#使用-token-登录][使用 Token 登录]]

* 教程 & 例子
  + [[http://www.ruanyifeng.com/blog/2014/05/restful_api.html][RESTful API 设计指南]]
  + [[https://developer.github.com/v3/][Github REST API v3]]

* 一般规则
  1. 使用 HTTPS 协议
  2. 应该尽量将 API 部署在专用域名
     #+BEGIN_EXAMPLE
       https://api.example.com
     #+END_EXAMPLE

     简单的可以放在：
     #+BEGIN_EXAMPLE
       https://example.org/api/
     #+END_EXAMPLE
  3. 应该将 API 的版本号放入 URL
  4. endpoint 应该总是一个名词而不是动词
  5. 使用 HTTP 动词来表示对资源的具体操作类型：
     #+BEGIN_EXAMPLE
       GET（SELECT）：从服务器取出资源（一项或多项）。
       POST（CREATE）：在服务器新建一个资源。
       PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。
       PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
       DELETE（DELETE）：从服务器删除资源。
     #+END_EXAMPLE

* 使用 Token 登录
  1. 首次登录时，后端服务器判断用户账号密码正确之后，根据用户 id、用户名、定义好的秘钥、过期时间生成 token, 返回给前端
  2. 前端拿到后端返回的 token, 存储在 localStroage
  3. 前端每次路由跳转，判断 localStroage 有无 token ，没有则跳转到登录页，有则请求获取用户信息，改变登录状态；
  4. 每次请求接口，在请求头里携带 token
  5. 后端接口判断请求头有无 token, 没有或者 token 过期，返回 401
  6. 前端得到 401 状态码，重定向到登录页面

