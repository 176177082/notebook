#+TITLE:      JavaScript 使用技巧

* 目录                                                    :TOC_4_gh:noexport:
- [[#让返回值变成-undefined][让返回值变成 undefined]]
- [[#显示所有元素的-outline][显示所有元素的 outline]]
- [[#iife][IIFE]]

* 让返回值变成 undefined
  在浏览器地址栏执行函数时这个技巧挺有用的，可以避免因为函数返回值进行跳转：
  #+BEGIN_SRC js
    javascript:void window.prompt("Copy to clipboard: Ctrl+C, Enter", `[[${window.location.href}][${document.title}]]`)
  #+END_SRC  

  直接通过关键字 void 将值覆盖。

* 显示所有元素的 outline
  控制台中 $$ 相当于 document.querySelectorAll
  #+BEGIN_SRC js
    $$("*").forEach(
      e => e.style.outline = "1px solid #" + (~~(Math.random() * (1<<24))).toString(16)
    )
  #+END_SRC

* IIFE
  IIFE（立即调用函数表达式）是一个在定义时就会立即执行的 JavaScript 函数。

  这是一个被称为自执行匿名函数的设计模式，主要包含两部分:
  + 第一部分是包围在圆括号运算符 () 里的一个匿名函数，这个匿名函数拥有独立的词法作用域。
    这不仅避免了外界访问此 IIFE 中的变量，而且又不会污染全局作用域。
  + 第二部分再一次使用 () 创建了一个立即执行函数表达式，JavaScript 引擎到此将直接执行函数。

  #+BEGIN_SRC javascript
    (function () { 
      var name = "Barry";
    })();
  #+END_SRC

