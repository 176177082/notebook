#+TITLE:      Maven

* 目录                                                    :TOC_4_gh:noexport:
- [[#maven-基础][Maven 基础]]
  - [[#标准目录结构][标准目录结构]]
- [[#问题集][问题集]]
  - [[#怎样通过-maven-创建运行-webapp][怎样通过 Maven 创建运行 WebApp]]
  - [[#maven-的版本号命名规则是怎样的][Maven 的版本号命名规则是怎样的]]

* Maven 基础
** 标准目录结构
   |------------------------------------+----------------------------------------------------------------------------|
   | 目录                               | 目的                                                                       |
   |------------------------------------+----------------------------------------------------------------------------|
   | ${basedir}                         | 存放 pom.xml 和所有的子目录                                                |
   | ${basedir}/src/main/java           | 项目的 java 源代码                                                         |
   | ${basedir}/src/main/resources      | 项目的资源，比如说 property 文件，springmvc.xml                            |
   | ${basedir}/src/test/java           | 项目的测试类，比如说 Junit 代码                                            |
   | ${basedir}/src/test/resources      | 测试用的资源                                                               |
   | ${basedir}/src/main/webapp/WEB-INF | web 应用文件目录，web 项目的信息，比如存放 web.xml、本地图片、jsp 视图页面 |
   | ${basedir}/target                  | 打包输出目录                                                               |
   | ${basedir}/target/classes          | 编译输出目录                                                               |
   | ${basedir}/target/test-classes     | 测试编译输出目录                                                           |
   | Test.java                          | Maven 只会自动运行符合该命名规则的测试类                                   |
   | ~/.m2/repository                   | Maven 默认的本地仓库目录位置                                               |
   |------------------------------------+----------------------------------------------------------------------------|


* 问题集
** 怎样通过 Maven 创建运行 WebApp
   1) 运行如下指定创建基本的 WebApp 项目：
      #+BEGIN_EXAMPLE
        $ mvn archetype:generate -DarchetypeArtifactId=maven-archetype-webapp 
      #+END_EXAMPLE
   2) 添加 Servlet API 依赖项：
      #+BEGIN_SRC xml
        <!-- https://mvnrepository.com/artifact/javax.servlet/javax.servlet-api -->
        <dependency>
          <groupId>javax.servlet</groupId>
          <artifactId>javax.servlet-api</artifactId>
          <version>3.1.0</version>
          <scope>provided</scope>
        </dependency>
      #+END_SRC
   3) 添加 Tomcat 插件支持直接运行 WebApp：
      #+BEGIN_SRC xml
        <build>
          <plugins>
            <plugin>
              <groupId>org.apache.tomcat.maven</groupId>
              <artifactId>tomcat7-maven-plugin</artifactId>
              <version>2.2</version>
              <configuration>
                <url>http://localhost:8080/servletp</url>
                <server>tomcat</server>
              </configuration>
            </plugin>
          </plugins>
        </build>
      #+END_SRC
   4) 编译打包可以通过如下命令完成：
      #+BEGIN_EXAMPLE
        $ mvn package
      #+END_EXAMPLE
   5) 运行 WebApp 可以通过如下命令完成：
      #+BEGIN_EXAMPLE
        $ mvn tomcat7:run
      #+END_EXAMPLE
   
** Maven 的版本号命名规则是怎样的
   Maven 版本号命名规则中主要需要注意两点：
   1) 语义化版本命名规则
   2) 镜像版本 SNAPSHOT

   其中，语义化版本命名规则核心规则如下：
  |------+----------+---------------------------------------------------------------|
  | 序号 | 格式要求 | 说明                                                          |
  |------+----------+---------------------------------------------------------------|
  | x    | 非负整数 | 主版本号(major)，进行不向下兼容的修改时，递增主版本号         |
  | y    | 非负整数 | 次版本号(minor)，保持向下兼容,新增特性时，递增次版本号        |
  | z    | 非负整数 | 修订号(patch),保持向下兼容,修复问题但不影响特性时，递增修订号 |
  |------+----------+---------------------------------------------------------------|

  而镜像版本 SNAPSHOT 是 maven 的特殊版本号，maven 在处理的时候，把 SNAPSHOT 字符创自动替换成时间。
  说明这是一个不稳定的版本。

  参考：
  + [[https://segmentfault.com/a/1190000011368506][版本命名及限定规则详解 - 个人文章 - SegmentFault 思否]]
  + [[https://liyixing1.iteye.com/blog/2171254][版本号规范，镜像版本SNAPSHOT，LATEST 和 RELEASE 版本 - 李义星 - ITeye博客]]

