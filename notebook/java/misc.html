<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2021-01-09 周六 19:45 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Java Misc</title>
<meta name="generator" content="Org mode">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://rgb-24bit.github.io/blog/misc/style.css">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125860001-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125860001-1');
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="https://rgb-24bit.github.io/notebook/"> UP </a>
 |
 <a accesskey="H" href="https://rgb-24bit.github.io"> HOME </a>
</div><div id="content">
<h1 class="title">Java Misc</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgef8344f">1. SPI</a></li>
<li><a href="#orga9f6318">2. JCP</a></li>
<li><a href="#orgf684825">3. 异常层次结构</a></li>
<li><a href="#org2e5fddd">4. 时间格式化</a></li>
<li><a href="#orgac4311a">5. Collections</a></li>
<li><a href="#org7d95afb">6. Comparator</a></li>
<li><a href="#org61d189e">7. JAR File Specification</a></li>
<li><a href="#orgd5e9e96">8. Collection.toArray</a></li>
<li><a href="#org2884a5a">9. Vector &amp; Stack</a></li>
<li><a href="#org61495e8">10. 序列化</a></li>
<li><a href="#orga86f0d5">11. 日期和时间</a></li>
<li><a href="#org3901a0d">12. DatatypeConverter</a></li>
<li><a href="#orgf2d51ea">13. Temporal.with</a></li>
<li><a href="#orgd925317">14. String.split</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgef8344f" class="outline-2">
<h2 id="orgef8344f"><span class="section-number-2">1</span> SPI</h2>
<div class="outline-text-2" id="text-1">
<p>
SPI 的全称为 (Service Provider Interface) ，是 JDK 内置的一种服务提供发现机制。主要由工具类 <code>java.util.ServiceLoader</code> 提供相应的支持。
</p>

<p>
其中的两个角色为：
</p>
<ul class="org-ul">
<li>Service - 服务，通常为一个接口或一个抽象类，具体类虽然也可以，但是一般不建议那样做</li>
<li>Service Provider - 服务提供者，服务的具体实现类</li>
</ul>

<p>
使用时，需要在 <code>META-INF/services</code> 下创建和服务的全限定名相同的文件，然后在该文件中写入服务提供者的全限定名，可以用 <code>#</code> 作为注释。
</p>

<p>
然后，就可以通过 <code>ServiceLoader</code> 来获取这些服务提供者。由于 ServiceLoader 并没有提供直接获取服务提供者的方法，因此，只能通过迭代的方式获取：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">ServiceLoader</span>&lt;<span class="org-type">Service</span>&gt; <span class="org-variable-name">loader</span> = ServiceLoader.load(Service.<span class="org-keyword">class</span>, getClassLoader());

<span class="org-keyword">for</span> (<span class="org-type">Service</span> <span class="org-variable-name">service</span> : loader) {
  <span class="org-comment-delimiter">// </span><span class="org-comment">...</span>
}
</pre>
</div>

<p>
参考：<a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">ServiceLoader (Java Platform SE 8 )</a>
</p>
</div>
</div>

<div id="outline-container-orga9f6318" class="outline-2">
<h2 id="orga9f6318"><span class="section-number-2">2</span> JCP</h2>
<div class="outline-text-2" id="text-2">
<p>
JCP（Java Community Process）成立于 1998 年，是使有兴趣的各方参与定义 Java 的特征和未来版本的正式过程。
</p>

<p>
JCP 使用 JSR（Java 规范请求，Java Specification Requests）作为正式规范文档，描述被提议加入到 Java 体系中的的规范和技术。
</p>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://en.wikipedia.org/wiki/Java_Community_Process">Java Community Process - Wikipedia</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf684825" class="outline-2">
<h2 id="orgf684825"><span class="section-number-2">3</span> 异常层次结构</h2>
<div class="outline-text-2" id="text-3">
<p>
可以根据通用异常 -&gt; 库异常 -&gt; 业务异常的层次创建 <code>asset</code> 工具类，抛出相应层次的异常，便于管理。
</p>
</div>
</div>

<div id="outline-container-org2e5fddd" class="outline-2">
<h2 id="org2e5fddd"><span class="section-number-2">4</span> 时间格式化</h2>
<div class="outline-text-2" id="text-4">
<p>
作为 Java 程序员，作为偶尔还会写一点前端的 Java 程序员，可能会遇到需要使用多种时间格式的情况，主要有 Java、Moment(ISO 8601) 和 strftime 这几种格式。
</p>

<p>
三种格式的文档可以参考：
</p>
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html">DateTimeFormatter (Java Platform SE 8 )</a></li>
<li><a href="https://momentjs.com/docs/#/displaying/format/">Format - Moment.js | Docs</a></li>
<li><a href="https://zh.cppreference.com/w/c/chrono/strftime">strftime - cppreference.com</a></li>
</ul>

<p>
常用的时间模式符：
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">

<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">时间</th>
<th scope="col" class="org-left">Java</th>
<th scope="col" class="org-left">Moment</th>
<th scope="col" class="org-left">strftime</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">Year</td>
<td class="org-left">yy: 69, yyyy: 1969</td>
<td class="org-left">YY: 69, YYYY: 1969</td>
<td class="org-left">%y: 69, %Y: 1969</td>
</tr>

<tr>
<td class="org-left">Month</td>
<td class="org-left">M: 7, MM: 07, MMM: Jul, MMMM: July, MMMMM: J</td>
<td class="org-left">M:7, MM: 07, MMM: Jul</td>
<td class="org-left">%m: 07, %b: Jul, %B: July</td>
</tr>

<tr>
<td class="org-left">Day of Month</td>
<td class="org-left">d: 6, dd: 06</td>
<td class="org-left">D: 6, DD: 06</td>
<td class="org-left">%d: 06</td>
</tr>

<tr>
<td class="org-left">Day of Week</td>
<td class="org-left">E: Wed, EEE: Wednesday, EEEE: W</td>
<td class="org-left">ddd: Wed, dddd: Wednesday</td>
<td class="org-left">%a: Wed, %A: Wednesday</td>
</tr>

<tr>
<td class="org-left">Hour</td>
<td class="org-left">H: 9, HH: 09</td>
<td class="org-left">H: 9, HH: 09</td>
<td class="org-left">%H: 09</td>
</tr>

<tr>
<td class="org-left">Minute</td>
<td class="org-left">mm: 02</td>
<td class="org-left">mm: 02</td>
<td class="org-left">%M: 02</td>
</tr>

<tr>
<td class="org-left">Second</td>
<td class="org-left">ss: 00</td>
<td class="org-left">ss: 00</td>
<td class="org-left">%S: 00</td>
</tr>
</tbody>
</table>

<p>
NOTE: Java 以前的版本中提供了 SimpleDateFormat 这个方便的日期格式化类，但是这个类是线程不安全的，因此，考虑使用 Java8 中的 DateTimeFormatter 替换。
</p>
</div>
</div>

<div id="outline-container-orgac4311a" class="outline-2">
<h2 id="orgac4311a"><span class="section-number-2">5</span> Collections</h2>
<div class="outline-text-2" id="text-5">
<p>
Java JDK 中的 Collections 提供了很多用于创建新集合的方法，大致可以分为如下几类：
</p>
<div class="org-src-container">
<pre class="src src-java">checkedXXX();       <span class="org-comment-delimiter">// </span><span class="org-comment">&#21019;&#24314;&#31867;&#22411;&#23433;&#20840;&#30340;&#38598;&#21512;</span>
emptyXXX();         <span class="org-comment-delimiter">// </span><span class="org-comment">&#31354;&#38598;&#21512;</span>
singletonXXX();     <span class="org-comment-delimiter">// </span><span class="org-comment">&#21333;&#20803;&#32032;&#38598;&#21512;</span>
synchronizedXXX();  <span class="org-comment-delimiter">// </span><span class="org-comment">&#24182;&#21457;&#23433;&#20840;&#30340;&#38598;&#21512;</span>
unmodifiableXXX();  <span class="org-comment-delimiter">// </span><span class="org-comment">&#19981;&#21487;&#20462;&#25913;&#30340;&#38598;&#21512;</span>
</pre>
</div>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/Collections.html">Collections (Java Platform SE 8 )</a></li>
</ul>
</div>
</div>

<div id="outline-container-org7d95afb" class="outline-2">
<h2 id="org7d95afb"><span class="section-number-2">6</span> Comparator</h2>
<div class="outline-text-2" id="text-6">
<p>
Comparator 接口提供了很多默认方法来构建 Comparator 实例，比如说需要根据需要排序二维数组：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">int</span>[][] <span class="org-variable-name">arr</span> = {
  {1, 2, 3},
  {4, 5, 6},
  {7, 8, 9}
};
Arrays.sort(arr, Comparator.comparing(item -&gt; item[0] % 2));
</pre>
</div>

<p>
只不过需要注意在数组类型上的使用，特别是设计到基本数据类型和多维数组的时候，可以参考：
</p>
<ul class="org-ul">
<li><a href="https://www.baeldung.com/java-8-comparator-comparing">Guide to Java 8 Comparator.comparing() | Baeldung</a></li>
</ul>
</div>
</div>

<div id="outline-container-org61d189e" class="outline-2">
<h2 id="org61d189e"><span class="section-number-2">7</span> JAR File Specification</h2>
<div class="outline-text-2" id="text-7">
<p>
虽然说因为 Maven、Gradle 等工具的存在，我们基本上都不需要手动打包了，但是，了解一些 JAR File Specification 还是有好处的，参考：
</p>
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jar/jar.html#JARManifest">JAR File Specification</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd5e9e96" class="outline-2">
<h2 id="orgd5e9e96"><span class="section-number-2">8</span> Collection.toArray</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-java"><span class="org-comment-delimiter">// </span><span class="org-comment">ArraysList.toArray()</span>
<span class="org-keyword">public</span> &lt;<span class="org-type">T</span>&gt; <span class="org-type">T</span>[] <span class="org-function-name">toArray</span>(<span class="org-type">T</span>[] <span class="org-variable-name">a</span>) {
  <span class="org-keyword">if</span> (a.length &lt; <span class="org-type">size</span>)
    <span class="org-comment-delimiter">// </span><span class="org-comment">Make a new array of a's runtime type, but my contents:</span>
    <span class="org-keyword">return</span> (<span class="org-type">T</span>[]) Arrays.copyOf(elementData, size, a.getClass());
  System.arraycopy(elementData, 0, a, 0, size);
  <span class="org-keyword">if</span> (a.length &gt; size)
    a[size] = <span class="org-constant">null</span>;
  <span class="org-keyword">return</span> a;
}
</pre>
</div>

<p>
因此，简单的使用不需要考虑传入参数的长度：
</p>
<div class="org-src-container">
<pre class="src src-java">list.toArray(<span class="org-keyword">new</span> <span class="org-type">Integer</span>[0]);
</pre>
</div>
</div>
</div>

<div id="outline-container-org2884a5a" class="outline-2">
<h2 id="org2884a5a"><span class="section-number-2">9</span> Vector &amp; Stack</h2>
<div class="outline-text-2" id="text-9">
<p>
<code>Vector</code> 和 <code>ArrayList</code> 两者都实现 <code>List</code> 接口，但 <code>Vector</code> 支持线程同步，即某一时刻只有一个线程能够写 <code>Vector</code>.
</p>

<p>
因此 <code>Vector</code> 较 <code>ArrayList</code> 慢一些。
</p>

<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">Stack Method</th>
<th scope="col" class="org-left">Equivalent Deque Method</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">push(e)</td>
<td class="org-left">addFirst(e)</td>
</tr>

<tr>
<td class="org-left">pop()</td>
<td class="org-left">removeFirst()</td>
</tr>

<tr>
<td class="org-left">peek()</td>
<td class="org-left">peekFirst()</td>
</tr>
</tbody>
</table>

<p>
而 <code>Vector</code> 的子类 <code>Stack</code> 实现了一个标准的后进先出的栈，一般使用还是使用 <code>Deque</code> 比较好。
</p>
</div>
</div>

<div id="outline-container-org61495e8" class="outline-2">
<h2 id="org61495e8"><span class="section-number-2">10</span> 序列化</h2>
<div class="outline-text-2" id="text-10">
<p>
实现了 <code>Serializable</code> 接口的类的对象可以被 <b>序列化</b>, 序列化时，该对象引用的所有对象也会被自动序列化。
</p>

<p>
如果引用的对象中存在不能序列化的对象， 那么序列化会失败。 一种解决方法是用关键字 <code>transient</code> 修饰不被序列化的对象，序列化时会跳过这些被 <code>transient</code> 修饰的实例变量。
</p>

<p>
如果对象内部存在两个引用同一对象的实例变量，那么别引用的独享只会保存一次。
</p>

<p>
序列化：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">FileOutputStream</span> <span class="org-variable-name">fileStream</span> = <span class="org-keyword">new</span> <span class="org-type">FileOutputStream</span>(<span class="org-string">"object.ser"</span>);
<span class="org-type">ObjectOutputStream</span> <span class="org-variable-name">os</span> = <span class="org-keyword">new</span> <span class="org-type">ObjectOutputStream</span>(fileStream);

os.writeObject(object);
os.close();
</pre>
</div>

<p>
解序列化时， 对象重流中读取出来， 通过存储的信息判断出对象的类， 如果 java 虚拟机找不到或无法加载该类， 则虚拟机会抛出异常。
</p>

<p>
新的对象会二笔直接配置在堆上， 构造函数不会被执行。
</p>

<p>
如果对象的继承树上有个不可序列化的祖先类， 那么重该类开始及其以上的类的构造函数都会被执行。
</p>

<p>
对象的实例变量会被还原为序列化时的状态， transient 变量被还原为对应类型的 <b>默认值</b>.
</p>

<p>
<b>静态变量</b> 不会被序列化。 解序列化时也不会影响静态变量的值。
</p>

<p>
解序列化：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-keyword">import</span> <span class="org-constant">java</span>.<span class="org-constant">io</span>.*;

<span class="org-type">FileInputStream</span> <span class="org-variable-name">fileStream</span> = <span class="org-keyword">new</span> <span class="org-type">FileInputStream</span>(<span class="org-string">"object.ser"</span>);
<span class="org-type">ObjectInputStream</span> <span class="org-variable-name">os</span> = <span class="org-keyword">new</span> <span class="org-type">ObjectInputStream</span>(fileStream);

<span class="org-type">Object</span> <span class="org-variable-name">obj</span> = os.readObject();  <span class="org-comment-delimiter">// </span><span class="org-comment">&#36890;&#36807;&#24378;&#21046;&#31867;&#22411;&#36716;&#25442;&#36716;&#25442;&#20026;&#20854;&#20182;&#31867;&#22411;</span>
os.close()
</pre>
</div>
</div>
</div>

<div id="outline-container-orga86f0d5" class="outline-2">
<h2 id="orga86f0d5"><span class="section-number-2">11</span> 日期和时间</h2>
<div class="outline-text-2" id="text-11">
<p>
日期格式化：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-comment-delimiter">// </span><span class="org-comment">&#23436;&#25972;&#26085;&#26399;&#21644;&#26102;&#38388;</span>
String.format(<span class="org-string">"%tc"</span>, <span class="org-keyword">new</span> <span class="org-type">Date</span>());

<span class="org-comment-delimiter">// </span><span class="org-comment">&#21482;&#26377;&#26102;&#38388;</span>
String.format(<span class="org-string">"%tr"</span>, <span class="org-keyword">new</span> <span class="org-type">Date</span>());

<span class="org-comment-delimiter">// </span><span class="org-comment">&#21608;&#65292; &#26376;&#65292; &#26085; - %tA, %tB, %td</span>
String.format(<span class="org-string">"%tA %&lt;tB %&lt;td"</span>, <span class="org-keyword">new</span> <span class="org-type">Date</span>());
</pre>
</div>

<p>
取得当前日期和时间使用 <code>Date</code>.
</p>

<p>
其余功能可以使用 <code>Calendar</code>.
</p>
</div>
</div>

<div id="outline-container-org3901a0d" class="outline-2">
<h2 id="org3901a0d"><span class="section-number-2">12</span> DatatypeConverter</h2>
<div class="outline-text-2" id="text-12">
<p>
<code>javax.xml.bind.DatatypeConverter</code> 是一个挺有用的工具类，包括将字节数组转化为 16 进制字符串这样的方法。
</p>

<p>
官方文档：<a href="https://docs.oracle.com/javase/8/docs/api/javax/xml/bind/DatatypeConverter.html#printHexBinary-byte:A-">DatatypeConverter (Java Platform SE 8 )</a>
</p>
</div>
</div>

<div id="outline-container-orgf2d51ea" class="outline-2">
<h2 id="orgf2d51ea"><span class="section-number-2">13</span> Temporal.with</h2>
<div class="outline-text-2" id="text-13">
<p>
所有实现了 <code>Temporal</code> 接口的类都可以通过 <code>with</code> 方法方便快捷的对时间进行调整：
</p>
<div class="org-src-container">
<pre class="src src-java"><span class="org-type">LocalDateTime</span> <span class="org-variable-name">endOfDate</span> = localDateTime.with(<span class="org-constant">ChronoField</span>.NANO_OF_DAY, <span class="org-constant">LocalTime</span>.MAX.toNanoOfDay());
</pre>
</div>

<p>
与之相关的实用工具类：
</p>
<ul class="org-ul">
<li><a href="https://docs.oracle.com/javase/8/docs/api/java/time/temporal/ChronoField.html">ChronoField (Java Platform SE 8 )</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd925317" class="outline-2">
<h2 id="orgd925317"><span class="section-number-2">14</span> String.split</h2>
<div class="outline-text-2" id="text-14">
<p>
Java 字符串的 split 方法默认行为和其它语言存在一点区别……参考：
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/14602062/java-string-split-removed-empty-values">Java String split removed empty values - Stack Overflow</a></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
版权声明：本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'rgb-24bit';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
</div>
</body>
</html>
