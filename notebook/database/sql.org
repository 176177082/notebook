#+TITLE:      SQL

* 目录                                                    :TOC_4_gh:noexport:
- [[#风格指南][风格指南]]
- [[#查询语句执行顺序][查询语句执行顺序]]

* 风格指南
  完整文档: [[http://www.sqlstyle.guide/zh/][SQL样式指南 · SQL Style Guide]]
  
  #+BEGIN_SRC sql
    (SELECT f.species_name,
            AVG(f.height) AS average_height, AVG(f.diameter) AS average_diameter
       FROM flora AS f
      WHERE f.species_name = 'Banksia'
         OR f.species_name = 'Sheoak'
         OR f.species_name = 'Wattle'
      GROUP BY f.species_name, f.observation_date)

      UNION ALL

    (SELECT b.species_name,
            AVG(b.height) AS average_height, AVG(b.diameter) AS average_diameter
       FROM botanic_garden_flora AS b
      WHERE b.species_name = 'Banksia'
         OR b.species_name = 'Sheoak'
         OR b.species_name = 'Wattle'
      GROUP BY b.species_name, b.observation_date)
#+END_SRC

* 查询语句执行顺序 
  #+BEGIN_SRC sql
    SELECT    -- 最后执行
    FROM    -- 指定表
    WHERE    -- 筛选条件, 先执行 WHERE, 后执行 GROUP BY
    GROUP BY -- 分组
    ORDER BY -- 排序, 最后执行
  #+END_SRC

