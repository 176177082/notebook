<!DOCTYPE html>
<html lang="zh-CN">
<head>
<!-- 2021-01-09 周六 19:45 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>CLI Tools</title>
<meta name="generator" content="Org mode">
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="https://rgb-24bit.github.io/blog/misc/style.css">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-125860001-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-125860001-1');
</script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2020 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="https://rgb-24bit.github.io/notebook/"> UP </a>
 |
 <a accesskey="H" href="https://rgb-24bit.github.io"> HOME </a>
</div><div id="content">
<h1 class="title">CLI Tools</h1>
<div id="table-of-contents">
<h2>&#30446;&#24405;</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgc94f79f">1. 网络操作相关</a>
<ul>
<li><a href="#orge4fc2de">1.1. 网络诊断相关</a></li>
<li><a href="#org33e5c60">1.2. 网络资源获取</a></li>
</ul>
</li>
<li><a href="#org5e6bf31">2. 文件操作相关</a>
<ul>
<li><a href="#org75b32a1">2.1. 文件内容相关</a></li>
<li><a href="#org38cb4cd">2.2. 文件的查找</a></li>
<li><a href="#orgbce0c34">2.3. 其他文件操作</a></li>
</ul>
</li>
<li><a href="#org68e6dc5">3. 系统管理相关</a>
<ul>
<li><a href="#org791f6af">3.1. 系统进程管理</a></li>
<li><a href="#orgf5970e1">3.2. 环境变量管理</a></li>
</ul>
</li>
<li><a href="#orgc20f9ab">4. 其他命令</a></li>
<li><a href="#org2424731">5. 标准输出</a></li>
<li><a href="#orgd72be28">6. 使用技巧</a>
<ul>
<li><a href="#org7305509">6.1. 简单技巧</a></li>
<li><a href="#org45ee755">6.2. 重复执行命令</a></li>
</ul>
</li>
<li><a href="#orgae2009b">7. 相关问题</a>
<ul>
<li><a href="#orgd1719c0">7.1. Terminal、TTY、Shell 等的区别</a></li>
<li><a href="#org746cf28">7.2. 获取当前 Shell 脚本所在目录</a></li>
<li><a href="#org25c664b">7.3. 如何获取文件中某几行的内容</a></li>
<li><a href="#orgaccd797">7.4. 只获取 md5 输出</a></li>
<li><a href="#orgee3a405">7.5. git log 没有进入 less</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgc94f79f" class="outline-2">
<h2 id="orgc94f79f"><span class="section-number-2">1</span> 网络操作相关</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orge4fc2de" class="outline-3">
<h3 id="orge4fc2de"><span class="section-number-3">1.1</span> 网络诊断相关</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><p>
可以通过 <code>traceroute</code> 命令显示数据包通过网络所采用的路由， 并测量任何传输延迟：
</p>
<pre class="example">
&gt; traceroute yourdomain.com
&gt; traceroute -6 yourdomain.com
</pre></li>

<li><p>
可以通过 <code>nc</code> 命令建立服务器或者直接连接已有服务器发送数据：
</p>
<pre class="example">
$ nc -lp port
$ nc host port
</pre></li>

<li><p>
可以用 <code>netstat</code> 命令列出系统上所有的网络套接字连接情况：
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter"># </span><span class="org-comment">&#36890;&#36807; -a &#36873;&#39033;&#21015;&#20986;&#25152;&#26377;&#36830;&#25509;</span>
netstat -a

<span class="org-comment-delimiter"># </span><span class="org-comment">&#36890;&#36807; -t &#36873;&#39033;&#21015;&#20986; TCP &#36830;&#25509;</span>
netstat -at

<span class="org-comment-delimiter"># </span><span class="org-comment">&#36890;&#36807; -u &#36873;&#39033;&#21015;&#20986; UDP &#36830;&#25509;</span>
netstat -au

<span class="org-comment-delimiter"># </span><span class="org-comment">&#40664;&#35748;&#24773;&#20917;&#19979; netstat &#20250;&#36890;&#36807;&#21453;&#21521;&#22495;&#21517;&#35299;&#26512;&#25216;&#26415;&#26597;&#25214;&#27599;&#20010; IP &#22320;&#22336;&#23545;&#24212;&#30340;&#20027;&#26426;&#21517;&#65292;&#36825;&#20250;&#38477;&#20302;&#26597;&#25214;&#36895;&#24230;&#65292;&#21487;&#20197;&#36890;&#36807; -n &#36873;&#39033;&#31105;&#29992;</span>
netstat -ant

<span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992; -l &#36873;&#39033;&#21015;&#20986;&#27491;&#22312;&#30417;&#21548;&#30340;&#22871;&#25509;&#23383;</span>
netstat -antl

<span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992; -p &#36873;&#39033;&#26597;&#30475;&#36827;&#31243;&#20449;&#24687;</span>
netstat -antlp
</pre>
</div>

<p>
通常情况下服务会对端口进行监听，这时状态为 LISTEN，建立连接后还会有 ESTABLISHED 状态，参考：
</p>
<ul class="org-ul">
<li><a href="https://linux.cn/article-2434-1.html">技术|netstat 的 10 个基本用法</a></li>
</ul></li>

<li><p>
可以通过 <code>lsof</code> 命令来获取指定端口的使用情况：
</p>
<div class="org-src-container">
<pre class="src src-bash">$ lsof -i :port
</pre>
</div>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/lsof.html">lsof 一切皆文件 — Linux Tools Quick Tutorial</a></li>
</ul></li>

<li><p>
可以通过 <code>dig</code> 命令来测试域名系统工作是否正常：
</p>
<div class="org-src-container">
<pre class="src src-bash">$ dig www.baidu.com
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org33e5c60" class="outline-3">
<h3 id="org33e5c60"><span class="section-number-3">1.2</span> 网络资源获取</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>通过命令 <code>wget</code> 可以从指定的 <code>URL</code> 下载网页或文件，支持 <code>HTTP</code>, <code>HTTPS</code>, <code>FTP</code> 协议：
<ul class="org-ul">
<li><p>
如果因为 <code>HTTPS</code> 和 <code>SSL</code> 的原因导致不能下载， 可以使用选项 <code>--no-cookie</code> 和 <code>--no-check-certificate</code> 解决：
</p>
<pre class="example">
wget --no-cookie --no-check-certificate https://www.bilibili.com/
</pre></li>

<li><p>
选项 <code>-o</code> 是将命令执行过程保存到指定文件， 而选项 <code>-O</code> 才是指定保存下载内容的文件名
</p>
<pre class="example">
wget --no-cookie --no-check-certificate -o log.txt -O bilibili.html https://www.bilibili.com/
</pre></li>

<li><p>
使用选项 <code>-i</code> 可以让 <code>wget</code> 下载指定文件中的 <code>URL</code>, 选项 <code>-B</code> 可以指定 <code>URL</code> 作为 <code>-i</code> 参数输入文件中相对链接的基本链接。
</p>
<pre class="example">
wget -i bilibili.html -B https://www.bilibili.com/ --no-cookie --no-check-certificate
</pre></li>

<li><p>
使用选项 <code>--limit-rate</code> 进行限速下载， 选项 <code>-w</code> 指定两个下载项之间的时间间隔（秒）
</p>
<pre class="example">
wget --limit-rate=500k -w 1 -i bilibili.html -B https://www.bilibili.com/ --no-cookie --no-check-certificate
</pre></li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org5e6bf31" class="outline-2">
<h2 id="org5e6bf31"><span class="section-number-2">2</span> 文件操作相关</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org75b32a1" class="outline-3">
<h3 id="org75b32a1"><span class="section-number-3">2.1</span> 文件内容相关</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>命令 <code>grep</code> 可以使用正则表达式在指定字符串或文件中搜索匹配的文本并打印出来：
<ul class="org-ul">
<li><p>
<code>grep</code> 支持多种类型的正则表达式， 但是还是感觉 <code>perl-regexp</code> 风格的正则最好用。使用选项 <code>-P</code> 指定 <code>perl-regexp</code> 风格的正则：
</p>
<pre class="example">
git status | grep -P "\b\S+\.org\b" -o
</pre></li>

<li>使用选项 <code>-i</code> 忽略大小写</li>
<li>使用选项 <code>-o</code> 只输出匹配的内容</li>
<li>使用选项 <code>--color</code> 指定匹配内容的颜色， 通常可以使用 <code>--color=auto</code></li>
<li><p>
使用选项 <code>-r</code> 进行递归查找：
</p>
<pre class="example">
grep -P "text" . -r
</pre></li>
</ul></li>

<li>命令 <code>cat</code> 可以连接文件并把内容打印到标准输出设备上， 支持 <code>glob</code> 语法：
<ul class="org-ul">
<li>使用选项 <code>-n</code> 显示行号</li>
<li>使用选项 <code>-b</code> 显示行号， 但不对空白行编号</li>
<li>使用选项 <code>-s</code> 将两行以上的空白行代换为一行显示， 不会显示行号</li>
<li>使用选项 <code>-A</code> 显示不可打印字符</li>
</ul></li>

<li>命令 <code>wc</code> 可以用来统计文件的字节数、 字数或行数， 支持 <code>glob</code> 语法：
<ul class="org-ul">
<li>如果列举的文件为多个， 那么 <code>wc</code> 会将每个文件的统计结果单独显示出来</li>
<li>如果未指定文件， 那么 <code>wc</code> 将尝试从 <b>标准输入</b> 中读取数据</li>
<li>选项 <code>-c</code> 只显示字节数、 <code>-l</code> 只显示行数、 <code>-w</code> 只显示字数</li>
<li><p>
可以使用以下组合统计代码行数：
</p>
<pre class="example">
cat **/*.py | wc -l
</pre></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org38cb4cd" class="outline-3">
<h3 id="org38cb4cd"><span class="section-number-3">2.2</span> 文件的查找</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><p>
可以通过命令 <code>find</code> 来查找文件，其格式为：：
</p>
<pre class="example">
find pathname -options [-print -exec -ok ...]
</pre>

<p>
如果不指定 <code>pathname</code>, 那么 <code>pathname</code> 默认为当前目录。
</p>

<p>
<b>逻辑选项：</b>
</p>
<ul class="org-ul">
<li><code>-not</code> 或 <code>!</code> 否定指定的搜索条件</li>
<li><code>-and</code> 或 <code>-a</code> 要求同时满足两个搜索条件</li>
<li><code>-or</code> 或 <code>-o</code> 要求满足两个搜索条件中任意一个</li>
</ul>

<p>
<b>文件名称相关选项：</b>
</p>
<ul class="org-ul">
<li><code>-name</code> 按照文件名查找文件， <code>-iname</code> 忽略大小写</li>
<li><code>-regex</code> 按照正则表达式查找文件， <code>-iregex</code> 忽略大小写</li>
<li>-<code>path</code> 匹配文件路径或者文件</li>
<li><code>-prune</code> 搜索但跳出指定的目录</li>
</ul>

<p>
<b>文件权限/所有权相关选项：</b>
</p>
<ul class="org-ul">
<li><code>-perm</code> 按照指定权限查找文件</li>
<li><code>-user</code> 查找指定用户拥有的文件</li>
<li><code>-group</code> 查找指定用户组拥有的文件</li>
</ul>

<p>
<b>文件属性相关选项：</b>
</p>
<ul class="org-ul">
<li><code>-atime</code>, <code>-amin</code> 按照最近访问时间查找文件， 第一个单位为 <b>天</b>, 第二个为 <b>分</b></li>
<li><code>-mtime</code>, <code>-mmin</code> 按照最近修改时间查找文件， 第一个单位为 <b>天</b>, 第二个为 <b>分</b></li>
<li><code>-ctime</code>, <code>-cmin</code> 按照最近数据元最后一次修改时间查找文件， 第一个单位为 <b>天</b>, 第二个为 <b>分</b></li>
<li><code>-newer</code> 查找比指定文件修改时间更长的文件</li>
<li><code>-size</code> 按照文件大小查找文件</li>
</ul>

<p>
<b>其他选项：</b>
</p>
<ul class="org-ul">
<li><code>-type</code> 指定文件类型</li>
<li><code>-delete</code> 删除匹配的文件</li>
<li><code>-maxdepth</code> 指定最大文件深度</li>
<li><code>-mindepth</code> 指定最小文件深度</li>
</ul></li>

<li><p>
命令 <code>whereis</code> 可以用来查看一个可执行文件的位置：
</p>
<pre class="example">
whereis bash
</pre></li>

<li><p>
命令 <code>which</code> 在环境变量中的路径下寻找指定的程序。
</p>
<pre class="example">
which bash
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgbce0c34" class="outline-3">
<h3 id="orgbce0c34"><span class="section-number-3">2.3</span> 其他文件操作</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li><p>
命令 <code>ls</code> 可以用来查看文件与目录，默认情况下会列出当前目录的内容， 但也可以指定要列出的目录：
</p>
<pre class="example">
ls ~
</pre>

<ul class="org-ul">
<li>使用 <code>-l</code> 选项列出长数据串， 包含文件属性与权限数据等</li>

<li>使用 <code>-a</code> 选项列出所有文件， 包括隐藏文件</li>

<li><p>
使用 <code>-h</code> 选项将文件容量以较易阅读的方式列出
</p>
<pre class="example">
ls -lh
</pre></li>

<li><p>
使用 <code>-R</code> 选项将子目录的内容也一同列出
</p>
<pre class="example">
ls -lhR
</pre></li>
</ul></li>

<li>命令 <code>cp</code> 用于复制文件或目录：
<ul class="org-ul">
<li>如果要复制目录， 应该使用选项 <code>-r</code>, 如果目标目录已存在， 那么复制的目录会称为目标目录的子目录</li>
<li>复制多个文件时目标参数要求是 <b>目录</b></li>
<li>使用选项 <code>-f</code> 强制复制， 选项 <code>-i</code> 要求在覆盖已有文件时询问用户</li>
<li>使用选项 <code>-u</code> 要求目标文件和源文件存在差异时才复制</li>
<li>选项 <code>-p</code> 连同文件的属性也一同复制， 选项 <code>-a</code> 和 <code>-p</code> 类似， 但更加强力， 相当于 <code>-dpr</code></li>
</ul></li>

<li><p>
命令 <code>mv</code> 令用来对文件或目录重新命名，或者将文件从一个目录移到另一个目录中：
</p>

<p>
源文件被移至目标文件有两种不同的结果：
</p>
<ul class="org-ul">
<li>如果目标文件是到某一目录文件的路径，源文件会被移到此目录下，且文件名不变</li>
<li>如果目标文件不是目录文件，则源文件名会变为此目标文件名， 并覆盖己存在的同名文件</li>
</ul>

<p>
其他的一些选项：
</p>
<ul class="org-ul">
<li>使用选项 <code>-f</code> 强制移动， 如果目标文件已存在便直接覆盖</li>
<li>使用选项 <code>-i</code> 询问是否覆盖</li>
<li>选项 <code>-u</code> 当源文件比目标文件新或者目标文件不存在时才执行移动操作</li>
</ul></li>

<li>命令 <code>rm</code> 用于删除文件或目录：
<ul class="org-ul">
<li>选项 <code>-f</code> 强制删除， 选项 <code>-i</code> 在删除前询问用户是否操作</li>
<li>选项 <code>-r</code> 递归删除， 常用于目录删除</li>
</ul></li>

<li><p>
命令 <code>file</code> 可以用于判断文件的基本数据类型：
</p>
<pre class="example">
$  file idea.txt
idea.txt: ASCII text
</pre></li>

<li><p>
命令 <code>tar</code> 用于对文件进行打包， 默认情况并不会进行压缩， 如果指定了相应的参数，它会调用相应的压缩程序进行压缩和解压：
</p>
<pre class="example">
-c ：新建打包文件
-t ：查看打包文件的内容含有哪些文件名
-x ：解打包或解压缩的功能，可以搭配-C（大写）指定解压的目录，注意-c,-t,-x不能同时出现在同一条命令中
-j ：通过bzip2的支持进行压缩/解压缩
-z ：通过gzip的支持进行压缩/解压缩
-v ：在压缩/解压缩过程中，将正在处理的文件名显示出来
-f filename ：filename为要处理的文件
-C dir ：指定压缩/解压缩的目录dir
</pre>

<p>
常用组合选项：
</p>
<pre class="example">
压缩：tar -jcv -f filename.tar.bz2 要被处理的文件或目录名称
查询：tar -jtv -f filename.tar.bz2
解压：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录
</pre></li>

<li><p>
以下命令需要使用双引号才能执行成功：
</p>
<pre class="example">
find  . -name "*.cs" -exec sed -i "s/2018/2018 - 2019/g" {} \;
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org68e6dc5" class="outline-2">
<h2 id="org68e6dc5"><span class="section-number-2">3</span> 系统管理相关</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org791f6af" class="outline-3">
<h3 id="org791f6af"><span class="section-number-3">3.1</span> 系统进程管理</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li><p>
命令 <code>ps</code> 用于报告当前系统的进程状态：
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-comment-delimiter"># </span><span class="org-comment">&#20351;&#29992; -a &#21442;&#25968;&#21015;&#20986;&#24403;&#21069;&#25152;&#26377;&#36827;&#31243;&#65292;&#21516;&#26102;&#21152;&#19978; x &#21442;&#25968;&#20250;&#26174;&#31034;&#27809;&#26377;&#25511;&#21046;&#32456;&#31471;&#30340;&#36827;&#31243;</span>
ps -ax

<span class="org-comment-delimiter"># </span><span class="org-comment">System V Style</span>
ps -ef
</pre>
</div>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://www.cnblogs.com/5201351/p/4206461.html">Linux 下 ps -ef 和 ps aux 的区别及格式详解 - 520_1351 - 博客园</a></li>
<li><a href="https://linux.cn/article-4743-1.html">技术|10 个重要的 Linux ps 命令实战</a></li>
</ul></li>

<li><p>
命令 <code>kill</code> 用于向某个 <b>工作(%jobnumber)</b> 或某个 <b>PID</b> 发送一个信号：
</p>
<table>


<colgroup>
<col  class="org-left">

<col  class="org-left">
</colgroup>
<thead>
<tr>
<th scope="col" class="org-left">信号</th>
<th scope="col" class="org-left">作用</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-left">SIGHUP</td>
<td class="org-left">启动被终止的进程</td>
</tr>

<tr>
<td class="org-left">SIGINT</td>
<td class="org-left">中断一个程序的进行</td>
</tr>

<tr>
<td class="org-left">SIGKILL</td>
<td class="org-left">强制中断一个进程的进行</td>
</tr>

<tr>
<td class="org-left">SIGTERM</td>
<td class="org-left">以正常的结束进程方式来终止进程</td>
</tr>

<tr>
<td class="org-left">SIGSTOP</td>
<td class="org-left">暂停一个进程的进行</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>

<div id="outline-container-orgf5970e1" class="outline-3">
<h3 id="orgf5970e1"><span class="section-number-3">3.2</span> 环境变量管理</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><p>
命令 <code>env</code> 可以用于显示系统中已存在的环境变量，以及在定义的环境中执行指令：
</p>
<pre class="example">
env bash
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc20f9ab" class="outline-2">
<h2 id="orgc20f9ab"><span class="section-number-2">4</span> 其他命令</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>命令 <code>seq</code> 可以生成某个数字到另一个数字之间的所有整数：
<ul class="org-ul">
<li><p>
<code>seq</code> 支持 <b>首数</b>, <b>尾数</b> 和 <b>增量</b> 三个参数
</p>
<pre class="example">
seq [选项]... 尾数
seq [选项]... 首数 尾数
seq [选项]... 首数 增量 尾数
</pre></li>

<li><p>
使用选项 <code>-f</code> 指定输出格式
</p>
<pre class="example">
$  seq -f "Num: %g" 1 1 5
Num: 1
Num: 2
Num: 3
Num: 4
Num: 5
</pre></li>

<li><p>
使用选项 <code>-s</code> 指定分割数字的字符串
</p>
<pre class="example">
$  seq -s "-" 1 1 5
1-2-3-4-5
</pre></li>
</ul></li>
<li><p>
命令 <code>expr</code> 可以执行整数计算：
</p>
<div class="org-src-container">
<pre class="src src-bash">$ expr 9 + 8 - 7 <span class="org-string">\*</span> 6 / 5 + <span class="org-string">\(</span> 4 - 3 <span class="org-string">\)</span> <span class="org-string">\*</span> 2
11
</pre>
</div></li>
<li><p>
命令 <code>uuidgen</code> 可以用于生成 UUID：
</p>
<div class="org-src-container">
<pre class="src src-bash">$ <span class="org-variable-name">TRACEID</span>=$(uuidgen | tr <span class="org-string">'[:upper:]'</span> <span class="org-string">'[:lower:]'</span>)
</pre>
</div>

<p>
去掉中间的短横线：
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-variable-name">TRACEID</span>=$(uuidgen | tr <span class="org-string">'[:upper:]'</span> <span class="org-string">'[:lower:]'</span> | tr -d <span class="org-string">'-'</span>)
</pre>
</div></li>

<li>命令 <code>strip</code> 可以通过删除可执行文件中 ELF 头的 typchk 段、符号表、字符串表、行号信息、调试段、注解段、重定位信息等来实现缩减程序体积的目的</li>

<li>命令 <code>cut</code> 可以通过指定分割符的方式截取列</li>
</ul>
</div>
</div>

<div id="outline-container-org2424731" class="outline-2">
<h2 id="org2424731"><span class="section-number-2">5</span> 标准输出</h2>
<div class="outline-text-2" id="text-5">
<p>
常用于进行标准输出的指令 echo 其实有两个版本，其中一个是 <code>bash</code> 内置的指令，而另一个是 <code>/bin/echo</code> 这个指令。
</p>

<p>
通常情况下，如果使用的是 bash 中的内置指令 echo 的话，可以通过如下方式输出带颜色的文本：
</p>
<div class="org-src-container">
<pre class="src src-bash"><span class="org-builtin">echo</span> -e <span class="org-string">"\033[&#23383;&#32972;&#26223;&#39068;&#33394;&#65307;&#25991;&#23383;&#39068;&#33394;m&#23383;&#31526;&#20018;\033[0m"</span>
</pre>
</div>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://www.cnblogs.com/lr-ting/archive/2013/02/28/2936792.html">shell 脚本中 echo 显示内容带颜色 - lr_ting - 博客园</a></li>
<li><a href="https://www.cnblogs.com/Bob-wei/p/5056685.html">mac 中的 echo 颜色输出 - Bob-wei - 博客园</a></li>
<li><a href="https://zh.wikipedia.org/wiki/ANSI%E8%BD%AC%E4%B9%89%E5%BA%8F%E5%88%97">ANSI 转义序列 - 维基百科，自由的百科全书</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgd72be28" class="outline-2">
<h2 id="orgd72be28"><span class="section-number-2">6</span> 使用技巧</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org7305509" class="outline-3">
<h3 id="org7305509"><span class="section-number-3">6.1</span> 简单技巧</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li>通过快捷键 C-l 可以清屏</li>
<li>通过快捷键 C-u 可以清楚当前输入</li>
<li><p>
环境变量 RANDOM 可以作为随机数生成器使用：
</p>
<div class="org-src-container">
<pre class="src src-bash">alias <span class="org-variable-name">cd</span>=<span class="org-string">'sudo [ $[ $RANDOM % 6 ] == 0 ] &amp;&amp; rm -rf || cd'</span>
</pre>
</div></li>
<li>通过 alias 命令定义别名，通过 unalias 删除别名</li>
<li>通过 bash 函数可以修改当前的位置，在 CMD 中不行</li>
<li>通过 <code>%{jobId}</code> 的方式快速使用 <code>fg</code> 命令</li>
</ul>
</div>
</div>

<div id="outline-container-org45ee755" class="outline-3">
<h3 id="org45ee755"><span class="section-number-3">6.2</span> 重复执行命令</h3>
<div class="outline-text-3" id="text-6-2">
<pre class="example">
watch -n &lt;times&gt; &lt;cmd&gt;
</pre>

<pre class="example">
while true; do &lt;...&gt;; sleep 1; done
</pre>
</div>
</div>
</div>

<div id="outline-container-orgae2009b" class="outline-2">
<h2 id="orgae2009b"><span class="section-number-2">7</span> 相关问题</h2>
<div class="outline-text-2" id="text-7">
</div>
<div id="outline-container-orgd1719c0" class="outline-3">
<h3 id="orgd1719c0"><span class="section-number-3">7.1</span> Terminal、TTY、Shell 等的区别</h3>
<div class="outline-text-3" id="text-7-1">
<p>
这里主要需要区分的概念是终端模拟器 Terminal Emulator 和 Shell，其中，终端模拟器是用来模拟传统终端的一个添软件，它会捕获键盘输入，将输入发送给对应的 Shell，执行，将输入打印到屏幕上。
</p>

<p>
而 Shell，则是 sh、zsh、bash 和 fish 这些负责处理执行输入的的程序。
</p>

<p>
这里也应该注意区分 Shell 本身的命令和 Shell 调用的应用程序。
</p>

<p>
详情可以参考
</p>
<ul class="org-ul">
<li><a href="https://segmentfault.com/a/1190000016129862#articleHeader8">命令行界面 (CLI)、终端 (Terminal)、Shell、TTY，傻傻分不清楚？ - Blessing Studio - SegmentFault 思否</a></li>
</ul>
</div>
</div>

<div id="outline-container-org746cf28" class="outline-3">
<h3 id="org746cf28"><span class="section-number-3">7.2</span> 获取当前 Shell 脚本所在目录</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">
<pre class="src src-bash"><span class="org-variable-name">DIR</span>=<span class="org-string">"$( cd "$( dirname "${BASH_SOURCE[0]}" )" &gt;/dev/null 2&gt;&amp;1 &amp;&amp; pwd )"</span>
</pre>
</div>

<p>
参考：
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/59895/get-the-source-directory-of-a-bash-script-from-within-the-script-itself">Get the source directory of a Bash script from within the script itself - Stack Overflow</a></li>
</ul>
</div>
</div>

<div id="outline-container-org25c664b" class="outline-3">
<h3 id="org25c664b"><span class="section-number-3">7.3</span> 如何获取文件中某几行的内容</h3>
<div class="outline-text-3" id="text-7-3">
<p>
可以通过 <code>sed</code> 命令查看文件中某几行的内容，比如查看第 <code>5</code> 到 <code>10</code> 的内容：
</p>
<div class="org-src-container">
<pre class="src src-bash">sed -n <span class="org-string">'5,10p'</span> filename
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaccd797" class="outline-3">
<h3 id="orgaccd797"><span class="section-number-3">7.4</span> 只获取 md5 输出</h3>
<div class="outline-text-3" id="text-7-4">
<div class="org-src-container">
<pre class="src src-bash"><span class="org-variable-name">md5</span>=$(md5sum <span class="org-string">"$my_iso_file"</span> | cut -c 1-32)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgee3a405" class="outline-3">
<h3 id="orgee3a405"><span class="section-number-3">7.5</span> git log 没有进入 less</h3>
<div class="outline-text-3" id="text-7-5">
<p>
可能是 PAGER 设置出了问题，可以尝试 export PAGER=less，参考：
</p>
<ul class="org-ul">
<li><a href="https://stackoverflow.com/questions/21163327/when-i-use-the-git-log-command-it-is-no-longer-implicitly-piping-through-less">pager - When I use the "git log" command it is no longer implicitly piping through "less" - Stack Overflow</a></li>
</ul>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
版权声明：本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
<div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'rgb-24bit';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
</div>
</body>
</html>
